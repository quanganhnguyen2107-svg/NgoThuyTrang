<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ch√∫c M·ª´ng Sinh Nh·∫≠t Ng√¥ Th√πy Trang</title>
  <style>
    body {
      margin: 0; padding: 0;
      background: linear-gradient(135deg, #ffe0e9, #ffc0cb);
      font-family: 'Segoe UI', Tahoma, sans-serif;
      overflow-x: hidden;
      color: #550022;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      max-width: 800px;
      margin: 40px auto;
      position: relative;
      z-index: 2;
    }
    h1 { font-size: 2.6em; color: #d81b60; margin: 0; text-align: center; }
    h2 { font-weight: normal; margin: 0 0 20px; text-align: center; }
    .info {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .info-text {
      flex: 1;
      text-align: left;
      font-size: 1.1em;
      line-height: 1.6;
      min-width: 250px;
    }
    .avatar {
      width: 180px;
      height: 180px;
      border-radius: 50%;
      object-fit: cover;
      border: 6px solid #d81b60;
    }
    
    /* Album ·∫£nh */
    .album {
      position: relative;
      width: 100%;
      height: 400px;
      margin: 30px 0;
      text-align: center;
    }
    .album img {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 300px;
      height: 400px;
      object-fit: cover;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }
    .album img.active {
      opacity: 1;
    }
    .album-controls {
      text-align: center;
      margin: 15px 0;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
    }
    .album-controls button {
      background: #d81b60;
      border: none;
      color: white;
      font-size: 1.1em;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .album-controls button:hover {
      background: #b71c46;
      transform: scale(1.05);
    }
    #image-counter {
      font-weight: bold;
      color: #d81b60;
      min-width: 60px;
    }
    
    .countdown {
      font-size: 1.2em;
      font-weight: 600;
      margin: 15px 0;
      color: #5a0a32;
      text-align: center;
    }
    button {
      background: #d81b60;
      border: none;
      color: white;
      font-weight: 700;
      font-size: 1.1em;
      padding: 12px 24px;
      border-radius: 12px;
      cursor: pointer;
      margin: 10px;
      transition: all 0.3s ease;
    }
    button:hover { background: #b71c46; }
    .gift {
      margin-top: 30px;
      display: none;
      text-align: center;
    }
    .gift img { width: 220px; border-radius: 16px; margin-bottom: 10px; }
    .message { font-size: 1.1em; color: #b71c46; font-weight: 600; line-height: 1.6; }
    #heart-container {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 10;
    }
    .heart {
      position: absolute;
      color: red;
      font-size: 20px;
      animation: fly 4s linear forwards;
    }
    @keyframes fly {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-100vh) scale(2); opacity: 0; }
    }
    canvas {
      position: fixed;
      top:0; left:0;
      width:100%; height:100%;
      pointer-events: none;
      z-index: 1;
    }
    .thanks-container { text-align:center; margin-top:20px; }
    .thanks-container button {
      padding:12px 24px;
      margin:10px;
      border:none;
      border-radius:12px;
      cursor:pointer;
      font-size:18px;
      font-weight:bold;
      transition:all 0.3s ease;
    }
    #thanksBtn { background:#4caf50; color:#fff; }
    #noBtn { background:#f44336; color:#fff; }
    #funny-text {
      margin-top:15px;
      font-size:18px;
      font-weight:bold;
      color:#550022;
      min-height:24px;
    }
    
    /* Responsive */
    @media (max-width: 600px) {
      .container { margin: 20px; padding: 20px; }
      .album { height: 300px; }
      .album img { 
        width: 250px; 
        height: 300px;
      }
      .info { flex-direction: column; text-align: center; }
      h1 { font-size: 2em; }
    }
  </style>
</head>
<body>
  <canvas id="fireworks"></canvas>
  <div id="heart-container"></div>

  <div class="container">
    <h1>üéâ Ch√∫c M·ª´ng Sinh Nh·∫≠t! üéÇ</h1>
    <h2>Ng√¥ Th√πy Trang (Ng·ªë)</h2>

    <div class="info">
      <div class="info-text">
        üìê <b>Th√¥ng tin</b><br>
        Ng√¥ Th√πy Trang <br>
        ƒêc: Cam ƒê√¥ng - Lai Kh√™ - Th√†nh ph·ªë H·∫£i Ph√≤ng <br>
        Gh√©t m√†u h·ªìng <br>
        Kh√¥ng th√≠ch s·ª± gi·∫£ d·ªëi <br>
        ƒÇn d∆∞a ph·∫£i t√≠nh theo t·∫°üçâ
      </div>
      <img src="IMG_2936.jpg" alt="·∫¢nh Ng√¥ Th√πy Trang" class="avatar" onerror="this.src='https://i.pravatar.cc/300?img=32'" />
    </div>

    <!-- Album ·∫£nh -->
    <div class="album">
      <img src="IMG_3843.jpg" class="active" alt="·∫¢nh Trang" onerror="handleImageError(this)" />
      <img src="beauty_20191124130331_Original.jpg" alt="·∫¢nh Trang" onerror="handleImageError(this)" />
      <img src="IMG_0240.jpg" alt="·∫¢nh Trang" onerror="handleImageError(this)" />
      <img src="IMG_0272.jpg" alt="·∫¢nh Trang" onerror="handleImageError(this)" />
      <img src="IMG_0279.jpg" alt="·∫¢nh Trang" onerror="handleImageError(this)" />
      <img src="fd6c26cd384ae3ef59f1852e07767c5a.jpg" alt="·∫¢nh Trang" onerror="handleImageError(this)" />
      <img src="IMG_0961.jpg" alt="·∫¢nh Trang" onerror="handleImageError(this)" />
      <img src="IMG_1542_Original.jpg" alt="·∫¢nh Trang" onerror="handleImageError(this)" />
      <img src="quality_restoration_20241020000055418_Original.jpg" alt="·∫¢nh Trang" onerror="handleImageError(this)" />
      <img src="IMG_0694_Original.jpg" alt="·∫¢nh Trang" onerror="handleImageError(this)" />
    </div>
    
    <div class="album-controls">
      <button onclick="prevImage()">‚¨ÖÔ∏è ·∫¢nh tr∆∞·ªõc</button>
      <span id="image-counter">1/10</span>
      <button onclick="nextImage()">·∫¢nh sau ‚û°Ô∏è</button>
    </div>

    <div class="countdown" id="countdown">ƒêang t√≠nh th·ªùi gian...</div>

    <div style="text-align: center;">
      <button onclick="showGift()">üéÅ Nh·∫≠n qu√†</button>
      <button id="musicBtn" onclick="toggleMusic()">üé∂ B·∫≠t nh·∫°c</button>
    </div>

    <div class="gift" id="gift">
      <img src="https://media.giphy.com/media/3o7aD2saalBwwftBIY/giphy.gif" alt="Qu√†" />
      <p class="message">
        üéÇ Ch√∫c m·ª´ng sinh nh·∫≠t c·∫≠u!(Kh√¥ng c√≥ qu√† ƒë√¢u nh√© ƒë·ª´ng h√≥ng) üéâ<br>
        Tu·ªïi m·ªõi ch√∫c c·∫≠u lu√¥n m·∫°nh kh·ªèe, b√¨nh an v√† th·∫≠t nhi·ªÅu ni·ªÅm vui.<br>
        Mong r·∫±ng m·ªói ng√†y tr√¥i qua ƒë·ªÅu mang ƒë·∫øn cho c·∫≠u nh·ªØng c∆° h·ªôi m·ªõi, th√†nh c√¥ng m·ªõi v√† th·∫≠t nhi·ªÅu tr·∫£i nghi·ªám ƒë√°ng nh·ªõ.<br>
        H√£y lu√¥n gi·ªØ n·ª• c∆∞·ªùi r·∫°ng r·ª° tr√™n m√¥i, s·ªëng h·∫øt m√¨nh v·ªõi ƒëam m√™ v√† ∆∞·ªõc m∆° c·ªßa m√¨nh.<br>
        Ch√∫c t√¨nh b·∫°n, t√¨nh y√™u v√† h·∫°nh ph√∫c lu√¥n ƒë·ªìng h√†nh c√πng c·∫≠u tr√™n m·ªçi ch·∫∑ng ƒë∆∞·ªùng. üíñ
      </p>
    </div>

    <div class="thanks-container">
      <button id="thanksBtn" onclick="sendHearts()">üôè C·∫£m ∆°n üíï</button>
      <button id="noBtn" onclick="growThanks()">üôÖ Kh√¥ng c·∫£m ∆°n</button>
      <p id="funny-text"></p>
    </div>
  </div>

  <audio id="bgMusic" loop>
    <source src="https://www.bensound.com/bensound-music/bensound-love.mp3" type="audio/mpeg">
  </audio>

  <script>
    // üîß QUAN TR·ªåNG: X·ª≠ l√Ω l·ªói ·∫£nh
    function handleImageError(img) {
      console.log('·∫¢nh l·ªói: ' + img.src);
      img.style.display = 'none';
      
      // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng ·∫£nh th·ª±c t·∫ø
      updateImageCounter();
    }

    // Album ·∫£nh
    let currentImageIndex = 0;
    const images = document.querySelectorAll('.album img');
    const imageCounter = document.getElementById('image-counter');

    function updateImageCounter() {
      const visibleImages = Array.from(images).filter(img => img.style.display !== 'none');
      const currentVisibleIndex = Array.from(images).indexOf(images[currentImageIndex]);
      
      if (visibleImages.length > 0) {
        imageCounter.textContent = `${currentVisibleIndex + 1}/${visibleImages.length}`;
      } else {
        imageCounter.textContent = '0/0';
        // N·∫øu kh√¥ng c√≥ ·∫£nh n√†o hi·ªÉn th·ªã, th√™m ·∫£nh m·∫∑c ƒë·ªãnh
        const album = document.querySelector('.album');
        album.innerHTML = '<p style="color: #d81b60; font-size: 1.2em;">üé® Kh√¥ng c√≥ ·∫£nh ƒë·ªÉ hi·ªÉn th·ªã</p>';
      }
    }

    function showImage(index) {
      // T√¨m ·∫£nh ti·∫øp theo c√≥ th·ªÉ hi·ªÉn th·ªã
      let found = false;
      for (let i = 0; i < images.length; i++) {
        const newIndex = (index + i) % images.length;
        if (images[newIndex].style.display !== 'none') {
          currentImageIndex = newIndex;
          found = true;
          break;
        }
      }
      
      if (!found) return;
      
      // ·∫®n t·∫•t c·∫£ ·∫£nh
      images.forEach(img => img.classList.remove('active'));
      
      // Hi·ªÉn th·ªã ·∫£nh hi·ªán t·∫°i
      images[currentImageIndex].classList.add('active');
      updateImageCounter();
    }

    function nextImage() {
      let nextIndex = (currentImageIndex + 1) % images.length;
      let attempts = 0;
      
      // T√¨m ·∫£nh ti·∫øp theo c√≥ th·ªÉ hi·ªÉn th·ªã
      while (images[nextIndex].style.display === 'none' && attempts < images.length) {
        nextIndex = (nextIndex + 1) % images.length;
        attempts++;
      }
      
      if (attempts < images.length) {
        showImage(nextIndex);
      }
    }

    function prevImage() {
      let prevIndex = (currentImageIndex - 1 + images.length) % images.length;
      let attempts = 0;
      
      // T√¨m ·∫£nh tr∆∞·ªõc ƒë√≥ c√≥ th·ªÉ hi·ªÉn th·ªã
      while (images[prevIndex].style.display === 'none' && attempts < images.length) {
        prevIndex = (prevIndex - 1 + images.length) % images.length;
        attempts++;
      }
      
      if (attempts < images.length) {
        showImage(prevIndex);
      }
    }

    // Kh·ªüi t·∫°o album
    setTimeout(() => {
      showImage(0);
      // T·ª± ƒë·ªông chuy·ªÉn ·∫£nh m·ªói 5 gi√¢y
      setInterval(nextImage, 5000);
    }, 1000);

    // C√°c h√†m kh√°c gi·ªØ nguy√™n
    function updateCountdown() {
      const now = new Date();
      const currentYear = now.getFullYear();
      let birthday = new Date(currentYear, 8, 26); 
      if (now > birthday) birthday = new Date(currentYear + 1, 8, 26);
      const diff = birthday - now;
      const d = Math.floor(diff / (1000*60*60*24));
      const h = Math.floor((diff / (1000*60*60)) % 24);
      const m = Math.floor((diff / (1000*60)) % 60);
      const s = Math.floor((diff / 1000) % 60);
      document.getElementById("countdown").textContent =
        `‚è≥ C√≤n ${d} ng√†y ${h} gi·ªù ${m} ph√∫t ${s} gi√¢y ƒë·∫øn sinh nh·∫≠t c·ªßa Trang!`;
    }
    setInterval(updateCountdown, 1000); updateCountdown();

    function showGift(){
      document.getElementById("gift").style.display="block";
      sendHearts();
      alert("üéÅ ƒê√©o qu√° qu√† ƒë√¢u nh√© lew lewüòú");
    }

    let playing=false;
    function toggleMusic(){
      const music=document.getElementById("bgMusic");
      const btn=document.getElementById("musicBtn");
      if(playing){ music.pause(); btn.textContent="üé∂ B·∫≠t nh·∫°c"; }
      else{ music.play(); btn.textContent="üîá T·∫Øt nh·∫°c"; }
      playing=!playing;
    }

    function sendHearts(){
      const funnyText=document.getElementById("funny-text");
      funnyText.innerText="ü•∞ Kh√¥ng ph·∫£i th·∫ø ƒë√¢u tao ng·∫°i ‚ù§Ô∏è";
      funnyText.style.color="green";

      for(let i=0;i<20;i++){
        let heart=document.createElement("div");
        heart.className="heart";
        heart.textContent="‚ù§Ô∏è";
        heart.style.left=Math.random()*100+"vw";
        heart.style.top="100vh";
        heart.style.fontSize=(Math.random()*20+20)+"px";
        document.getElementById("heart-container").appendChild(heart);
        setTimeout(()=>heart.remove(),4000);
      }
      setTimeout(()=>alert("üíå Kh√¥ng c·∫ßn c·∫£m ∆°n ƒë√¢u tao ng·∫°i ü§£"),1000);
    }

    function growThanks(){
      let btn=document.getElementById("thanksBtn");
      let style=window.getComputedStyle(btn);
      let size=parseFloat(style.fontSize);
      btn.style.fontSize=(size+5)+"px";
      const funnyText=document.getElementById("funny-text");
      funnyText.innerText="üòè Kh√¥ng c·∫£m ∆°n c≈©ng kh√¥ng tho√°t ƒë√¢u, n√∫t kia s·∫Ω to d·∫ßn ƒë√≥!";
      funnyText.style.color="red";
      alert("üôÉ Dmm c·∫£m ∆°n b·ªë!");
    }

    const canvas=document.getElementById("fireworks");
    const ctx=canvas.getContext("2d");
    let particles=[];
    function resize(){ canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
    window.onresize=resize; resize();
    function random(min,max){ return Math.random()*(max-min)+min; }
    function createFirework(x,y){
      for(let i=0;i<80;i++){
        particles.push({
          x:x,y:y,
          vx:random(-3,3),vy:random(-3,3),
          alpha:1,
          color:`hsl(${random(0,360)},100%,50%)`
        });
      }
    }
    canvas.addEventListener("click",e=>createFirework(e.clientX,e.clientY));
    setInterval(()=>createFirework(Math.random()*canvas.width, Math.random()*canvas.height/2), 2000);
    function animate(){
      ctx.fillStyle="rgba(0,0,0,0.2)";
      ctx.fillRect(0,0,canvas.width,canvas.height);
      particles.forEach((p,i)=>{
        p.x+=p.vx; p.y+=p.vy; p.alpha-=0.01;
        ctx.globalAlpha=p.alpha;
        ctx.fillStyle=p.color;
        ctx.beginPath(); ctx.arc(p.x,p.y,2,0,Math.PI*2); ctx.fill();
        if(p.alpha<=0) particles.splice(i,1);
      });
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>
